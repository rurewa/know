1. Cтруктура программы Ардуино

Структура программы Ардуино  достаточно проста и в минимальном варианте состоит из двух частей setup() и loop().

void setup()  
    { 
        //  код выполняется один раз при запуске программы 
    }
    
    
void loop()  
    {
        // основной код, выполняется в цикле 
    }

Функция setup() выполняется один раз, при включении питания или  сбросе контроллера. Обычно в ней происходят начальные установки  переменных, регистров. Функция должна присутствовать в программе, даже  если в ней ничего нет.
После завершения setup() управление переходит к функции loop().  Она в  бесконечном цикле выполняет команды, записанные в ее теле (между  фигурными скобками). Собственно эти команды и совершают все  алгоритмические действия контроллера.
Первоначальные правила синтаксиса языка C.

;  точка с запятой  Выражения могут содержать сколь  угодно много пробелов, переносов строк. Признаком завершения выражения  является символ ”точка с запятой ”.

z = x + y; 
z=      x     
+ y ;
  
{   }  фигурные скобки определяют блок функции или выражений. Например, в функциях setup() и loop().

/* … */ блок комментария, обязательно закрыть.

/* это блок      комментария  */

// однострочный комментарий, закрывать не надо, действует до конца строки.

// это одна строка комментария

Переменные и типы данных

Переменная это ячейка оперативной памяти, в которой хранится  информация. Программа использует переменные для хранения промежуточных   данных вычислений. Для вычислений могут быть использованы данные разных  форматов, разной разрядности, поэтому у переменных в языке C есть  следующие типы.


| Тип данных    | Разрядность, бит | Диапазон чисел               |
| boolean       | 8                | true, false                  |
| char          | 8                | -128 … 127                   |
| unsigned char | 8                | 0 … 255                      |
| byte          | 8                | 0 … 255                      |
| int           | 16               | -32768 … 32767               |
| unsigned int  | 16               | 0 … 65535                    |
| word          | 16               | 0 … 65535                    |
| long          | 32               | -2147483648 … 2147483647     |
| unsigned long | 32               | 0 … 4294967295               |
| short         | 16               | -32768 … 32767               |
| float         | 32               | -3.4028235+38 … 3.4028235+38 |
| double        | 32               | -3.4028235+38 … 3.4028235+38 |

Типы данных выбираются исходя из требуемой точности вычислений, форматов данных и т.п. Не стоит, например, для счетчика, считающего до 100, выбирать тип long. Работать будет, но операция займет больше памяти данных и программ, потребует больше времени.

<b>Объявление переменных</b>

Указывается тип данных, а затем имя переменной.

int x;                      // объявление переменной с именем x типа int 

float widthBox;   // объявление переменной с именем widthBox типа float

Все переменные должны быть объявлены до того как будут использоваться.

Переменная может быть объявлена в любой части программы, но от этого  зависит, какие блоки программы могут ее использовать. Т.е. у переменных  есть области видимости.

• Переменные, объявленные в начале программы, до функции void setup(), считаются глобальными и доступны в любом месте программы.
• Локальные переменные объявляются внутри функций или таких блоков, как цикл for, и могут использоваться только в объявленных блоках. Возможны несколько переменных с одним именем, но разными областями видимости.

int mode;           // переменная доступна всем функциям

void setup()  
    {
        //  пустой блок, начальные установки не требуются 
    }
    
void loop()  
    {
        long  count;                     // переменная count доступна только в функции loop()
        for ( int i=0; i < 10;)      // переменная i доступна только внутри цикла    
   {
        i++;
    } 
 }

При объявлении переменной можно задать ее начальное значение (проинициализировать).

int x = 0;              // объявляется переменная x с начальным значением 0

char d = ‘a’;        // объявляется переменная d с начальным значением равным коду символа ”a”

При арифметических операциях с разными типами данных происходит  автоматическое преобразование типов данных. Но лучше всегда использовать  явное преобразование.

int x;                     // переменная int 
char y;                  // переменная char 
int z;                     // переменная int 
z = x + (int) y;     // переменная y явно преобразована в int



Источник http://mypractic.ru/urok-4-osnovy-programmirovaniya-arduino-na-yazyke-c.html
