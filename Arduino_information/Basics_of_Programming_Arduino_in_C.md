1. Cтруктура программы Ардуино

Структура программы Ардуино  достаточно проста и в минимальном варианте состоит из двух частей setup() и loop().

void setup()  
    { 
        //  код выполняется один раз при запуске программы 
    }
    
    
void loop()  
    {
        // основной код, выполняется в цикле 
    }

Функция setup() выполняется один раз, при включении питания или  сбросе контроллера. Обычно в ней происходят начальные установки  переменных, регистров. Функция должна присутствовать в программе, даже  если в ней ничего нет.
После завершения setup() управление переходит к функции loop().  Она в  бесконечном цикле выполняет команды, записанные в ее теле (между  фигурными скобками). Собственно эти команды и совершают все  алгоритмические действия контроллера.
Первоначальные правила синтаксиса языка C.

;  точка с запятой  Выражения могут содержать сколь  угодно много пробелов, переносов строк. Признаком завершения выражения  является символ ”точка с запятой ”.

z = x + y; 
z=      x     
+ y ;
  
{   }  фигурные скобки определяют блок функции или выражений. Например, в функциях setup() и loop().

/* … */ блок комментария, обязательно закрыть.

/* это блок      комментария  */

// однострочный комментарий, закрывать не надо, действует до конца строки.

// это одна строка комментария

Переменные и типы данных

Переменная это ячейка оперативной памяти, в которой хранится  информация. Программа использует переменные для хранения промежуточных   данных вычислений. Для вычислений могут быть использованы данные разных  форматов, разной разрядности, поэтому у переменных в языке C есть  следующие типы.


| Тип данных    | Разрядность, бит | Диапазон чисел               |

| boolean       | 8                | true, false                  |

| char          | 8                | -128 … 127                   |

| unsigned char | 8                | 0 … 255                      |

| byte          | 8                | 0 … 255                      |

| int           | 16               | -32768 … 32767               |

| unsigned int  | 16               | 0 … 65535                    |

| word          | 16               | 0 … 65535                    |

| long          | 32               | -2147483648 … 2147483647     |

| unsigned long | 32               | 0 … 4294967295               |

| short         | 16               | -32768 … 32767               |

| float         | 32               | -3.4028235+38 … 3.4028235+38 |

| double        | 32               | -3.4028235+38 … 3.4028235+38 |

Типы данных выбираются исходя из требуемой точности вычислений, форматов данных и т.п. Не стоит, например, для счетчика, считающего до 100, выбирать тип long. Работать будет, но операция займет больше памяти данных и программ, потребует больше времени.

<b>Объявление переменных</b>

Указывается тип данных, а затем имя переменной.

int x;                      // объявление переменной с именем x типа int 

float widthBox;   // объявление переменной с именем widthBox типа float

Все переменные должны быть объявлены до того как будут использоваться.

Переменная может быть объявлена в любой части программы, но от этого  зависит, какие блоки программы могут ее использовать. Т.е. у переменных  есть области видимости.

• Переменные, объявленные в начале программы, до функции void setup(), считаются глобальными и доступны в любом месте программы.
• Локальные переменные объявляются внутри функций или таких блоков, как цикл for, и могут использоваться только в объявленных блоках. Возможны несколько переменных с одним именем, но разными областями видимости.

int mode;           // переменная доступна всем функциям

void setup()  
    {
        //  пустой блок, начальные установки не требуются 
    }
    
void loop()  
    {
        long  count;                     // переменная count доступна только в функции loop()
        for ( int i=0; i < 10;)      // переменная i доступна только внутри цикла    
   {
        i++;
    } 
 }

При объявлении переменной можно задать ее начальное значение (проинициализировать).

int x = 0;              // объявляется переменная x с начальным значением 0

char d = ‘a’;        // объявляется переменная d с начальным значением равным коду символа ”a”

При арифметических операциях с разными типами данных происходит  автоматическое преобразование типов данных. Но лучше всегда использовать  явное преобразование.

int x;                     // переменная int 
char y;                  // переменная char 
int z;                     // переменная int 
z = x + (int) y;     // переменная y явно преобразована в int

Арифметические операции

| = | присваиваниее      |
| + | сложение           |
| - | вычитание          |
| * | произведение       |
| / | деление            |
| % | остаток от деления |

Операции отношения.

| ==     | равно            | 
| !=     | не равно         |
| <      | меньше           |
| >      | больше           |
| <=     | меньше или равно |
| >=     | больше или равно |

Логические операции.

| &&         | логическое И   |
| ||         | логическое ИЛИ |
| !          | логическое НЕ  |


Операции над указателями


| *          | косвенная адресация         |
| &          | получение адреса переменной |


Битовые операции


| &          | И               |
| |          | ИЛИ             |
| ^          | ИСКЛЮЧАЮЩЕЕ ИЛИ |
| ~          | ИНВЕРСИЯ        |
| <<         | СДВИГ ВЛЕВО     |
| >>         | СДВИГ ВПРАВО    |


Операции смешанного присваивания


| ++         | + 1 к переменной   |
| --         | - 1 к переменной   |
| +=         | сложение           |
| -=         | вычитание          |
| *=         | умножение          |
| /=         | деление            |
| %=         | остаток от деления |
| &=         | битовое И          |
| |=         | битовое ИЛИ        |     


<b>Выбор вариантов, управление программой</b>

Оператор IF проверяет условие в скобках и выполняет последующее выражение или блок в фигурных скобках, если условие истинно.

if (x == 5)             // если x=5, то выполняется z=0  
 z=0;
if (x > 5)               // если x > 5, то выполняется блок z=0, y=8; 
 {    z=0;    y=8; }
 
IF … ELSE позволяет сделать выбор между двух вариантов.

if (x > 5)               // если x > 5, то выполняется блок z=0, y=8; 
  {
     z=0;
     y=8;
   }
  else                       // в противном случае выполняется этот блок 
  {
     z=0;
     y=0;
   }
   
ELSE IF – позволяет сделать множественный выбор

if (x > 5)               // если x > 5, то выполняется блок z=0, y=8;
   {
      z=0;
      y=8;
    }
else if (x > 20)   // если x > 20, выполняется этот блок 
   {
    }
else                       // в противном случае выполняется этот блок 
   {
     z=0;
     y=0;
    }
    
SWITCH CASE - множественный выбор. Позволяет  сравнить переменную (в примере это x) с несколькими константами (в  примере 5 и 10) и выполнить блок, в котором переменная равна константе.

switch (x)  
{
case 5 :      
      // код выполняется если  x = 5
        break;
case 10 :
       // код выполняется если  x = 10
       break;
default :
       // код выполняется если  не совпало ни одно предыдущее значение
       break;
  }

Цикл FOR. Конструкция позволяет организовывать циклы с заданным количеством итераций. Синтаксис выглядит так:

for ( действие до начала цикла; условие продолжения цикла; действие в конце каждой итерации )  
     {
         // код тела цикла
     }

Пример цикла из 100 итераций.

for ( i=0; i < 100; i++ )     // начальное значение 0, конечное 99, шаг 1
    {
       sum = sum + I;
    }
  
Цикл WHILE. Оператор позволяет организовывать циклы с конструкцией:

while ( выражение ) 
 { 
 // код тела цикла
  }
  
Цикл выполняется до тех пор, пока выражение в скобках истинно. Пример цикла на 10 итераций.

x = 0; 
 while ( x < 10 ) 
  { 
   // код тела цикла
    x++;
   }



Источник http://mypractic.ru/urok-4-osnovy-programmirovaniya-arduino-na-yazyke-c.html
